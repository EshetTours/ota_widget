---
---
covid_events.mdc-image-list__item if='{d.reviews_over_time}'
  .chart.block.mdc-elevation--z1
    h2
      '{t('covid_events.title')}

    #covid_events-chart style="width: 100%; height: 500px;"

    .mentions-row
      .mention each='{m,i in mentions}'
        .mention-meta
          .topic
            strong
              '{t('opinions.topics.'+m.topic, {default: m.label})}
          .times
            '{m.opinions_count} {t('mentions.times')}

        .mention-score class='{w.mentions.scoreClass(m)}'
          '{w.mentions.scoreLabel(m)}

  javascript:
    this.w = window.ota_widget
    this.t = this.w.i18n.translate
    this.d = this.w.data

    this.topics = ['covid', 'sanitary_safety', 'health_precautions']

    this.on('update', function() {
      this.mentions = _.filter(this.d.mentions, function(m) {return _.includes(this.topics, m.topic)}.bind(this))
    })

