<!DOCTYPE html>
<html>
  <head>
    <meta content="width=device-width" name="viewport" />
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    <meta charset="utf-8" />
    <title>Olery OTA Widget demo</title>
    <link href="https://unpkg.com/material-components-web@0.17.0/dist/material-components-web.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link href="css/ota_widget.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/es6-promise/4.1.0/es6-promise.auto.min.js"></script>
    <script src="https://cdn.jsdelivr.net/fetch/2.0.1/fetch.min.js"></script>
    <script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/riot@3.6/riot+compiler.js"></script>
    <script src="js/ota_widget.js" type="text/javascript"></script>
  </head>
  <body>
    <ota-widget class="mdc-layout-grid" style="display: none">
      <h1>
        <span>{d.name} </span><img class="seal" src="images/seal.png" width="96px" />
      </h1>
      <div class="mdc-image-list mdc-image-list--masonry masonry-image-list">
        <div class="mdc-image-list__item">
          <div class="overall block mdc-elevation--z1">
            <div class="rating {w.ratings.toCss100(d.rating)}">
              {w.ratings.format(d.rating / 10)} 
            </div>
            <div class="count">
              <strong class="count-value">{d.review_count} {t('overall.reviews')} </strong>
              <div class="count-period">
                {t('overall.period')} 
              </div>
            </div>
          </div>
        </div>
        <div class="mdc-image-list__item">
          <div class="recent-reviews block mdc-elevation--z1"></div>
        </div>
        <div class="mdc-image-list__item">
          <div class="ratings block mdc-elevation--z1">
            <h2>
              {t('ratings.title')} 
            </h2>
            <div class="subratings">
              <div class="subrating" each="{r in d.ratings}" if="{r.title}">
                <div class="title">
                  <strong>{t('ratings.topics.'+r.topic, {default: r.title})} </strong>
                </div>
                <div class="rating-bar">
                  <div class="rating-value-bar {w.ratings.toCss100(r.value)}" style="width: {r.value}%"></div>
                </div>
                <div class="rating-value">
                  {w.ratings.format(r.value / 10)} 
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="mdc-image-list__item">
          <div class="mentions block mdc-elevation--z1">
            <h2>
              {t('mentions.title')} 
            </h2>
            <div class="mentions-row">
              <div class="mention" each="{m,i in d.mentions}" if="{i &lt; 8}">
                <div class="mention-meta">
                  <div class="topic">
                    <strong>{t('mentions.topics.'+m.topic, {default: m.label})} </strong>
                  </div>
                  <div class="times">
                    {m.opinions_count} {t('mentions.times')} 
                  </div>
                </div>
                <div class="mention-percentage {w.ratings.toCss100(m.percentage)}">
                  {Math.round(m.percentage)}% {t('mentions.positive')} 
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="mdc-image-list__item">
          <div class="guests block mdc-elevation--z1">
            <h2>
              {t('guests.title')} 
            </h2>
            <div class="guests-block" if="{d.guests}">
              <div class="country" each="{c,i in d.guests.countries}" if="{i &lt; 3}">
                <div class="icon">
                  <img class="flag flag-{c.country.toLowerCase()}" src="images/blank.gif" />
                </div>
                <div class="label">
                  {t('guests.countries.'+c.country, {default: c.label})} 
                </div>
                <div class="percentage">
                  {Math.round(c.percentage)}% 
                </div>
              </div>
              <div class="composition" each="{c,i in d.guests.compositions}" if="{i &lt; 3}">
                <div class="icon material-icons">
                  {w.ui.compositionIcons[c.travel_composition]} 
                </div>
                <div class="label">
                  {t('guests.compositions.'+c.travel_composition, {default: c.label})} 
                </div>
                <div class="percentage">
                  {Math.round(c.percentage)}% 
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="mdc-image-list__item">
          <div class="summaries block mdc-elevation--z1">
            <h2>
              {t('summaries.title')} 
            </h2>
            <div class="summary-block">
              <div class="summary" each="{s,i in d.summaries}" if="{s.sentiment &amp;&amp; i &lt; 8}">
                <div class="icon material-icons {s.sentiment}">
                  {s.sentiment == 'positive' ? 'add_circle_outline' : 'remove_circle_outline'} 
                </div>
                <strong class="name">{s.text} </strong>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ota-widget>
    <script>
      // your token goes here
      ota_widget.init('')
      ota_widget.load()
    </script>
    <div></div>
  </body>
</html>